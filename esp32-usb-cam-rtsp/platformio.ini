; PlatformIO Project Configuration File
; ESP32-S3 USB Camera RTSP Streamer

[env:esp32s3]
platform = espressif32@6.6.0
board = esp32-s3-devkitc-1
framework = espidf

; USB Host desteği için PSRAM gerekli
board_build.arduino.memory_type = qio_opi
board_build.flash_mode = qio
board_build.psram_type = opi
board_upload.flash_size = 16MB

; Monitor ayarları
monitor_speed = 115200
monitor_filters = esp32_exception_decoder

; Build flags
build_flags = 
    -DBOARD_HAS_PSRAM
    -DCONFIG_SPIRAM_CACHE_WORKAROUND
    -DCONFIG_USB_HOST_CONTROL_TRANSFER_MAX_SIZE=1024
    -DCONFIG_USB_HOST_HW_BUFFER_BIAS_BALANCED=1
    -DWIFI_AP_SSID=\"ESP32-CAM-RTSP\"
    -DWIFI_AP_PASS=\"12345678\"
    -DWIFI_AP_CHANNEL=6
    -DWIFI_AP_MAX_CONN=4
    -DRTSP_PORT=554
    -DRTSP_STREAM_NAME=\"/stream\"
    -DCAM_FRAME_WIDTH=640
    -DCAM_FRAME_HEIGHT=480
    -DCAM_FPS=15
    -DMAVLINK_UART_NUM=1
    -DMAVLINK_UART_TX_PIN=17
    -DMAVLINK_UART_RX_PIN=18
    -DMAVLINK_UART_BAUD=115200
    -DMAVLINK_UDP_PORT=14550

; Partition table
board_build.partitions = partitions.csv

; lib_deps KALDIRILDI - ESP-IDF USB Host kullanılacak

build_unflags = -Werror=all